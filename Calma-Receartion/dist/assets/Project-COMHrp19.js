import{j as a}from"./motion-BR0gRO37.js";import{r as l}from"./router-Bam1l8aD.js";import{P as w}from"./ProjectCard-CwzCOPYg.js";import{d as b}from"./index-CxtCM-RX.js";const v=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],f=b("search",v);function j(u){const{itemCount:t,estimateItemHeight:o,overscanRows:d=2}=u,[m,p]=l.useState(0),[y,x]=l.useState(t),i=l.useMemo(()=>{if(typeof window>"u")return 2;const n=window.innerWidth;return n>=1280?4:n>=768?3:2},[]);return l.useEffect(()=>{const n=()=>{const h=window.innerHeight,e=window.scrollY,r=Math.max(0,Math.floor(e/o)-d),s=Math.ceil(h/o)+d*2,c=r*i,g=Math.min(t,c+s*i);p(c),x(g)};return n(),window.addEventListener("scroll",n,{passive:!0}),()=>window.removeEventListener("scroll",n)},[t,o,d,i]),{startIndex:m,endIndex:y}}const C=["Residential","Commercial","Mixed-Use","Luxury","Sustainable","Community","Tower","Featured"],N=["Newest","Value","Type"];function k({projects:u,filters:t,onUpdateFilters:o,onOpenProject:d,labels:m}){const[p,y]=l.useState(t.searchQuery??""),x=l.useDeferredValue(p),i=l.useMemo(()=>{const e=(x??"").toLowerCase().trim();let r=u;switch(t.selectedCategory&&(r=r.filter(s=>s.category===t.selectedCategory)),t.activePhase&&(r=r.filter(s=>(s.phase??"").toLowerCase()===t.activePhase?.toLowerCase())),t.isFeatured&&(r=r.filter(s=>s.featured)),e&&(r=r.filter(s=>s.name.toLowerCase().includes(e)||s.location.toLowerCase().includes(e)||s.type.toLowerCase().includes(e)||(s.description??"").toLowerCase().includes(e))),t.sortBy){case"Type":return[...r].sort((s,c)=>s.type.localeCompare(c.type));case"Value":return[...r].sort((s,c)=>parseFloat(c.valueLabel.replace(/[^0-9.]/g,""))-parseFloat(s.valueLabel.replace(/[^0-9.]/g,"")));case"Newest":default:return r}},[u,t.selectedCategory,t.activePhase,t.isFeatured,t.sortBy,x]),{startIndex:n,endIndex:h}=j({itemCount:i.length,estimateItemHeight:360,overscanRows:2});return a.jsxs("section",{className:"w-full max-w-7xl mx-auto px-4 md:px-6 lg:px-8",children:[a.jsx("header",{className:"sticky z-30 bg-card/80 backdrop-blur-md border border-primary/10 rounded-2xl px-4 py-3 mb-4 mt-6",style:{top:"var(--nav-height, 64px)"},children:a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"relative flex-1 min-w-[220px]",children:[a.jsx(f,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-neutral-700","aria-hidden":"true"}),a.jsx("input",{type:"text",placeholder:m?.searchPlaceholder??"Search projects",value:p,onChange:e=>{y(e.target.value),o({searchQuery:e.target.value})},className:"w-full bg-neutral-100 text-neutral-900 placeholder:text-neutral-900 placeholder:opacity-70 border border-neutral-900 rounded-full pl-9 pr-4 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 hover:bg-white transition-colors","aria-label":"Search projects"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>o({selectedCategory:null}),className:`px-3 py-1 rounded-full border text-sm transition ${t.selectedCategory?"bg-secondary/40 hover:bg-secondary/60":"bg-primary/20 border-primary text-primary"}`,"aria-pressed":!t.selectedCategory,children:"All"}),C.map(e=>{const r=t.selectedCategory===e;return a.jsx("button",{onClick:()=>o({selectedCategory:r?null:e}),className:`px-3 py-1 rounded-full border text-sm transition ${r?"bg-primary/20 border-primary text-primary":"bg-secondary/40 hover:bg-secondary/60"}`,"aria-pressed":r,children:e},e)})]}),a.jsxs("div",{className:"ml-auto",children:[a.jsx("label",{className:"sr-only",htmlFor:"sort",children:m?.sortLabel??"Sort"}),a.jsx("select",{id:"sort",value:t.sortBy??"Newest",onChange:e=>o({sortBy:e.target.value}),className:"px-3 py-2 rounded-lg border bg-secondary/40 hover:bg-secondary/60",children:N.map(e=>a.jsx("option",{value:e,children:e},e))})]})]})}),a.jsxs("div",{className:"grid gap-4 md:gap-6",style:{gridTemplateColumns:"repeat(1, minmax(0, 1fr))"},children:[a.jsx("style",{children:`
          @media (min-width: 768px) {
            .grid {
              grid-template-columns: repeat(2, minmax(0, 1fr));
            }
          }
          @media (min-width: 1280px) {
            .grid {
              grid-template-columns: repeat(2, minmax(0, 1fr));
            }
          }
        `}),i.slice(n,h).map(e=>a.jsxs("div",{className:"relative",children:[a.jsx(w,{project:{id:String(e.id),title:e.name,subtitle:e.type,category:e.category,image:e.image,href:`/projects/${String(e.id)}`,descriptor:`${e.location} â€¢ ${e.valueLabel}`}}),a.jsx("button",{"aria-label":`Open ${e.name}`,className:"absolute inset-0 z-10 bg-transparent",onClick:r=>{r.preventDefault(),d(e)}})]},e.id))]})]})}export{k as P};
